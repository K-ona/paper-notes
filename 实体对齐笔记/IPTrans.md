# Iterative Entity Alignment via Knowledge Embeddings

## 简要介绍

利用一个已经对齐的实体集（种子集），连接这些实体以及相应的实体，如下图所示
![示意图](.\IPTransE示意图.png "IPTransE示意图示意图")

使用知识表示学习（如基于TransE的拓展），将KGs的实体、关系表示到一个统一的向量空间，因为其语义相近的实体关系在向量空间中也是相近的，因此可以简单的进行实体对齐。

具体的讲，该方法包括三步，**（1）知识嵌入：** 利用基于平移的知识表示学习得到各知识图谱的知识嵌入，包括实体与关系。**（2）联合嵌入：** 根据已知对齐实体的种子集将各知识图谱的嵌入映射到一个联合语义空间中，对其中实体进行实体对齐。**（3）迭代对齐：** 将置信度高的实体对
视为事实对联合语义空间中的知识嵌入进行更新。

## 问题定义

定义三元组：$ (h, r, t) $，其中h与t为头实体与尾实体，r为这两个实体的关系；
定义知识图谱：$ KG = (E, R, T) $，其中E是实体集、R为关系集、T为三元组集。
假设存在多知识图谱 $ \Sigma = \{KG_i=(E_i, R_i, T_i)\} $，他们是异质也是互补的，即一个知识图谱的实体在其他知识图谱里存在一个对应实体（或是不同语言、或是不同名字）。称这些实体为**同义实体** (synonymous entities), 实践中，一些同义实体是已知的，记为 $ L = \{(e_{i_1}, e_{i_2}, e_{i_3}, ..., e_{i_{|\Sigma|}}) | e_{i_j} \in E_j \wedge (e_{({i_1})_j}, e_{({i_2})_j}, \forall i_1 \neq i_2) \} $，也被称为已对齐实体。

实体对齐的任务是根据已知的对齐种子自动查找和对齐更多的同义实体，与实体的数量相比，关系集合通常小得多所以可以轻松手动或自动的对齐，因此可以假设所有关系之间的对齐关系是已知的。

## 模型方法

整体架构图如下所示，整体分为三部分：知识嵌入、联合嵌入、迭代对齐
![模型示意图](.\模型示意图.png "模型示意图")

### 知识嵌入

**TransE**
$ h + r \approx t $
**PTransE**
Define path: $P(h,t) = \{p | \forall e\in E, r_1,r_2 \in R, (h, r_1, e), (e, r_2, t) \in T, p=r_1\circ r_2 \}$
if $p \in P(h, t)\ and\ (h, r, t) \in T$,define path embedding as **$p \approx r$**

### 联合嵌入

通常知识嵌入是针对每个知识图谱分别进行学习得到，为进行实体对齐，我们需要将这些独立的嵌入联合到同一个语义空间里。
我们根据对齐种子进行联合嵌入，提出了三种模型。
**1. 基于平移(translation)的模型**
基于TransE的思想，认为对齐实体间也有一个平移距离，即对于同义实体 $e_1 \in E_1\ and\ e_2 \in E_2 $，假设存在$r^{E_1 \rightarrow E_2}$ 满足 $e_1 + r^{E_1 \rightarrow E_2} \approx e_2$
**2. 线性变换模型**
对于同义实体 $e_1 \in E_1\ and\ e_2 \in E_2 $，定义一个变换矩阵$M^{E_1 \rightarrow E_2}$, 使其满足$M^{E_1 \rightarrow E_2}e_1 \approx e_2$
**3. 参数共享模型**
因为这些同义实体是代表共同的真实对象，所以理应有相同的知识嵌入，即对于每一对同义实体$(e_1, e_2)$有$$e_1 \equiv e_2, (e_1, e_2) \in L $$

### 迭代对齐

经过上述步骤，我们在联合语义空间里计算$KG_1$每一个没有对齐的实体与其他$KG$中没有对齐过的实体的距离。设置一个阈值，若两个实体的距离小于该阈值则识其为同义实体。
利用这些新对齐的实体进行迭代更新联合语义空间。
**硬对齐** 
对于参数共享模型，我们将这些新同义实体加入L，使其嵌入强行相等，如$e_1=e_2\leftarrow \frac{1}{2}(e_1 + e_2)$然后根据这些更新的实体嵌入对整个语义空间进行更新
**软对齐** 
硬对齐可能会产生错误累积传播，一对非同义实体若被不小心对齐则可能会导致与其相关的非同义实体也被对齐。
为解决该问题，提出软对齐：对新对齐实体赋一个可信度分数
对于每对已对齐实体$(e_1, e_2)$，定义映射$R: (E_1, E_2) \rightarrow [0, 1]$，用于计算可信度分数
$$R(e_1, e_2) = \sigma(k(\theta - E(e_1, e_2) )) $$其中$E(e_1, e_2)$表示$e_1$与$e_2$之间的语义距离