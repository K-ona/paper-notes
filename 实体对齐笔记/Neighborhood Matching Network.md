# Neighborhood Matching Network for Entity Alignment

## 摘要

知识图谱之间存在的**结构异质性**对于实体对齐任务一直是一个为解决的难题，本文提出的领域匹配网络（NMN）旨在解决该问题。

NMN有两个新颖的模块用来进行表示学习，首先使用一种新的**图采用方法**提取每个实体的领域信息，然后采用一个**交叉图领域匹配模块**对给定实体对的领域差进行联合编码。

这种策略使NMN可以有效地构建面向匹配的实体表示同时忽略对实体对齐任务有负面影响的邻域。

## 引言

最近很多用基于嵌入的方法做实体对齐，这类方法的优点是不依赖于手动构建的特征或规则，通过一个种子集可以自动地将不同知识图谱的实体映射到一个统一的向量空间，测量实体向量之间的距离来获得同义实体。

这种方法有一个重要的基本假设，即不同知识图谱的同义实体有相似的结构信息（这样才能使同义实体的嵌入表示相似），但是由于知识图谱存在不完整性与异质性，这种假设通常很难成立。

如下图所示，两个同义实体在不同知识图谱（Wikipedia的中英版本）的结构截然不同，这种情况普遍存在。

<!-- ![示例](KGs不完整性与异质性示例.png) -->
<img src = "img/KGs不完整性与异质性示例.png" style = "zoom:50%">

对于图(a)中的同义实体邻域数差距问题，我们发现基于嵌入的方法在同义实体的邻域数的差变大的同时，其实体对齐的准确率在显著下降。

就算解决了邻域数量差的问题，图(b)还展示了另一种棘手的问题，即同义实体的共同邻域太过常见，这些共同邻域不太能够成为同义实体决定性因素，因此需要考虑另外非公共的邻域。

NMN是一个基于采样的实体对齐新框架，旨在捕获实体最具代表意义的邻域并精确估计实体对（不同知识图谱）之间邻域的相似度。

首先使用GCN对拓扑连接信息进行建模，为保留邻域中对实体对齐最有用的部分，选择性对实体的邻域进行采样。

然后关键性的问题是如何准确估计任意两个实体邻域的相似度。NMN通过设计一个关键邻域匹配模块利用跨图注意力机制来联合计算邻域（两个实体的邻域子图）的差别。

**contribution：**

1. 最先使用图采用策略来筛选一个实体对实体对齐任务最具意义的邻域；

2. 最先使用基于注意力的交叉图匹配机制来联合计算两个实体的邻域子图的差异性。

## 相关工作

1. 最近很多基于嵌入的方法没有考虑到实体的邻域异质性，一些考虑到邻域异质性的方法要么鲁棒性差要么训练集标注成本较高；

2. GNN很火，效果也很好，GNN很适合对图结构进行建模，**GMN使用GNN对图谱结构信息进行编码**；

3. 如何对两个图进行相似度量化？ 可通过精确匹配（图同构，2004）或图编辑距离（2002）。最近（2019）GMN通过基于注意力的跨图匹配机制在两个图上联合推理以求得两个图的相似度，**NMN受到了GMN的启发，通过类似机制来求两个实体邻域子图的相似度；**

4. 图采用：有基于点、边、遍历的采样，**NMN采用基于点的图采用来选择实体邻域中最重要的部分。**

## 模型与方法

**形式化问题定义：** 知识图谱表示为 $G=(E,R,T)$，对于$G_1$和$G_2$，基于一个预先对齐同义实体集，找到$G_1$和$G_2$中剩余的同义实体对。

### 图结构嵌入

NMN用一个多层GCN来得到实体的结构嵌入，每一层GCN更新一次实体表示：
$$h^{(l)}_i = \text{ReLU}(\sum_{j \in N_i \cup \{i\}} \frac {1} {\epsilon_i} W^{(l)}  h_j^{(l-1)} )$$

其中$h$为节点（实体）的特征表示（第一层的输入为实体名的pre-trained word embedding），$\epsilon_i$为正则化系数，$N_i$为实体$i$的邻居实体编号

为控制累积噪声，在GCN的各层引入了highway networks

### 邻域采样

对每个实体的邻域进行下采样，选出最有价值的部分实体

经过上一节的编码，各个节点（实体）的嵌入包含了丰富的邻域结构信息与实体本身语义信息，通过这个嵌入来进行邻域的下采样

经过观察发现，邻居实体与中心实体在上下文中共同出现的频率越高，该邻居实体对于该中心实体就越有价值，实验结果证明确实如此

对于实体$e_i$，其一跳的邻居$e_{i\_j}$被采样的概率为下式决定

$$ \begin{equation} \begin{split}  
p(h_{i\_j}|h_i) &= \text{softmax}(h_iW_sh^T_{i\_j})\\
&= \frac{exp(h_iW_sh^T_{i\_j})}{\sum_{k \in N_i} {exp(h_iW_sh_{i\_k}^T)}}
\end{split} \end{equation} $$

其中$N_i$表示实体i的邻域节点的下标（索引），$h_i$与$h_{i\_j}$分别是$e_i$，$e_{i\_j}$经过图结构嵌入模块得到嵌入表示

经过上述步骤，NMN对每个实体构建了一个邻域判别子图，将会用来做邻域匹配

### 邻域匹配


