# 基于属性嵌入的知识图谱间实体对齐（AAAI2019）

### 摘要

**实体对齐任务：** 找到两个知识图谱中哪些实体是指代现实世界中同一事物。

**基于嵌入的模型：** 能够捕获到同一知识图谱上实体间的语义相似度，但无法学习到不同知识图谱间实体的语义相似度

本文的模型能够学习到不同的知识图谱上实体的嵌入表示，因此能够学习到多个知识图谱间实体的相似度，有助于对齐不同知识图谱中的实体，进而对多个知识图谱进行集成

- 模型利用知识图谱中存在的大量属性三元组(attribute triples)生成属性字符嵌入（attribute character embeddings），属性字符嵌入通过基于实体的属性，计算实体间的相似性，将两个知识图谱中的实体嵌入到同一语义空间中。
- 使用传递性规则来丰富实体属性的数量，来增强属性字符嵌入。

### 引言

​知识图谱已经被应用到了很多的领域，如问答系统、推荐系统和地理知识库的句子生成等。

​每个知识图谱都是根据特定的应用场景所单独创建的，同一个实体在不同知识图谱中的存在形式也不同。例如

<img src="C:\Users\Taitai\AppData\Roaming\Typora\typora-user-images\image-20210507185924140.png" alt="image-20210507185924140" style="zoom: 40%;" />

知识图谱**LinkedGeoData**中的lgd:240111203和**DBpedia**中的 dbp:Kromsdorf都表示德国的一个叫Kromsdorf的城市，就完整性而言，这些知识图谱是相互补充的，因此我们可以整合这些知识图谱，形成一个更大规模更完整的知识图谱来进行知识推理。

​	要整合知识图谱，一个基本的问题就是识别两个知识图谱中哪些实体指代现实世界中的相同事物，这便是**实体对齐**任务。

知识是由三元组的形式存储的<subject,relationship/predicate,object>

subject是一种实体，如果object也是一种实体，那么称为关系三元组；如果object是subject的一种描述文字，那么称为属性三元组。

早期的实体对齐研究实体属性之间的相似性，这些方法由用户确定实体间要比较的属性，容易出错，因为不同实体对可能需要比较不同的属性。

最近，基于嵌入的模型被提出用于实体对齐任务，这种模型建立在知识图谱嵌入的基础上，如**TransE**，根据关系三元组来捕捉知识图中实体之间的语义相似性。但当面对两个知识图谱时，需要将两个知识图谱嵌入到相同的向量空间中，可以使用转移矩阵，但依赖于大量的种子实体，需要昂贵的人力。

本文针对上述问题，提出了新的基于嵌入的模型。

首先，从属性三元组生成属性嵌入

然后，使用该属性嵌入将两个知识图谱的实体嵌入转移到相同的向量空间。

本文的主要贡献：

实体对齐框架：谓词对齐模块、嵌入学习模块、实体对齐模块

新的嵌入模型，将实体嵌入和属性嵌入相结合，将两个知识图谱嵌入到一个语义空间

对比了三个实体对齐模型，$hits@1$高于最先进的模型50%以上。

### 相关工作

#### 基于字符串相似性的实体对齐（String-Similarity-based Entity Alignment）

#### 基于嵌入的实体对齐（Embedding-based Entity Alignment）

知识嵌入模型已经被用于知识图谱补全任务（基于现有知识图谱，预测缺失的实体或关系）

现有方法中，==基于翻译的模型==（TransE、TransH、TransD、DKRL）具有最好的性能。保留实体的结构信息

==也有非翻译的方法==：RESCAL、HolE、NTN

### Preliminary

#### 问题定义

#### TransE

$$
T_r = \{<h,r,t>|<h,r,t> \in G\}
$$

$$
f(t_r)=\left \| h+r-t\right \|
$$

$$
J_{SE}=\sum_{t_r \in T_r}\sum_{{t}'_r \in {T}'_r} \max(0,\gamma + f(t_r)-f({t_r}'))
$$

这种基于翻译的方法利用了知识图谱的结构特性，但是不同的知识图谱上的实体嵌入在不用的向量空间中，现有方法通过计算转移矩阵将不同的知识图谱嵌入同一向量空间，然而这种方法需要手动收集种子实体集

### 模型

![image-20210508111815246](C:\Users\Taitai\AppData\Roaming\Typora\typora-user-images\image-20210508111815246.png)

基于嵌入的模型框架：包括谓词对齐、嵌入学习和实体对齐三个部分

**谓词对齐模块：将关系嵌入同一个向量空间**。基于谓词的相似性来合并两个知识图谱，查找部分相似的谓词，并用同一的命名方案，将两个知识图谱$G_1$和$G_2$合并为$G_{1,2}$用于嵌入学习。

**嵌入学习模块：使用结构嵌入和属性嵌入联合学习两个知识图谱的实体嵌入。**

使用关系三元组学习结构嵌入，使用属性三元组学习属性嵌入

**实体对齐模块：**对齐实体$h_1\in G_1$，$h_2\in G_2$的相似性得分高于$\beta$

为了进一步提高模型的性能，我们使用关系传递规则来丰富实体的属性，这有助于构建更健壮的属性嵌入来计算实体之间的相似性。

#### 谓词对齐模块

使用统一的命名方案重命名两个知识图谱的谓词来合并两个知识图谱，

例如：根据谓词URI的编辑距离，将dbp:bornIn和yago:wasBornIn统一为：bornIn

#### 嵌入学习模块

##### 结构嵌入

使用TransE来学习实体的结构嵌入。与TransE不同，模型更希望关注已对齐的三元组，也就是包含对齐谓词的三元组。
$$
T_r = \{<h,r,t>|<h,r,t> \in G\}
$$

$$
f(t_r)=\left \| h+r-t\right \|
$$

$$
J_{SE}=\sum_{t_r \in T_r}\sum_{{t}'_r \in {T}'_r} \max[0,\gamma + \alpha (f(t_r)-f({t_r}')])
$$

$$
\alpha = \frac{count(r)}{|T|}
$$

其中${t}'_r$是随机替换的三元组，即为负样本

$T$为合并后$G_{1,2}$中三元组总数，$count(r)$为关系$r$出现的次数，$\alpha$为权重

如果关系$r$在两个知识图谱中都包含，则其所占比例会高一些，也就是前面所说的更希望关注已对齐的三元组。

##### 属性字符嵌入

参考TransE，作者将属性$a$表示为$h+r$

由于相同的属性$a$可能在两个知识图谱中的形式不同，例如同一个实体的纬度属性可能分别表示为50.9989和50.9988888889；同一个人的名词可能分别表示为“Barack Obama”和“Barack Hussein Obama”

因此，本文提出使用组合函数来对属性进行编码，并将属性三元组中每个元素的关系定义为$h+r=f_a(a)$，其中$f_a(a)$是组合函数，$a=\{ c_1,c_2,...,c_t \}$是属性值的字符序列。组合函数将属性值编码为单个向量，相似的属性值的向量距离接近。

作者定义了三个组成函数：

###### Sum compositional function (SUM)

思路：属性值的嵌入表示为其所有字符的嵌入求和

函数：$f_a(a)=c_1+c_2+...+c_t$

问题：包含相同字符的属性值会有相同的向量表示，例如：50.15和15.05表示相同

###### LSTM-based compositional function (LSTM)

思路：使用LSTM将一个字符序列编码为一个向量，将最终隐藏状态作为属性值的向量表示。

函数：$f_a(a)=f_{lstm}(c_1,c_2,...,c_t)$

###### N-gram-based compositional function(N-gram)

思路：使用属性值的n-gram组合的总和

函数：
$$
f_a(a)=\sum_{n=1}^{N}(\frac{\sum^t_{i=1}\sum^n_{j=1}c_j}{t-i-1})
$$
其中N表示n-gram组合中使用的$N$的最大值$N=10$，$t$为属性值的长度，其最小化目标函数$J_{CE}$为：
$$
J_{CE}=\sum_{t_a \in T_a}\sum_{{t}'_a \in {T}'_a} \max[0,\gamma + \alpha (f(t_a)-f({t_a}')])
$$

$$
T_a=\{ <{h}',r,a >\in G \}
$$

$$
f(t_a)=\| h+r-f_a(a) \|
$$

$$
{T}'_a =\{ <{h}',r,a>|{h}' \in E \} \cup \{ <h,r,{a}'>|{a}' \in A \}
$$

##### 结构嵌入和属性字符嵌入的联合学习

通过属性字符嵌入$h_{ce}$来帮助结构嵌入$h_{se}$在同一向量空间进行训练，最小化目标函数$J_{SIM}$为：
$$
J_{SIM}=\sum_{h\in G_1 \cup G_2}[1-cos(h_{ce},h_{se})]
$$
结构嵌入基于实体关系获取实体之间的相似度，属性字符嵌入基于属性值获取实体之间的相似度。结构嵌入和属性特征嵌入联合学习的总体目标函数$J$为：
$$
J=J_{SE}+J_{CE}+J_{SIM}
$$

#### 实体对齐模块

经过上述训练过程，不同的知识图谱中相似的实体会有相似的向量表示，因此可通过下面的公式来确定需要对齐的实体
$$
h_{map}=\arg \max_{h_2\in G_2}\cos(h_1,h_2)
$$
使用相似性阈值$\beta$来过滤不对齐的实体

#### 使用传递性规则提升模型性能

使用传递性规则来丰富三元组

已有三元组：$<h_1,r_1,t>$和$<t,h_2,t_2>$

可以推断：$h_1+(r_1.r_2) \approx t_2$

### 实验

<img src="C:\Users\Taitai\AppData\Roaming\Typora\typora-user-images\image-20210511135408685.png" alt="image-20210511135408685" style="zoom: 43%;" />

<img src="C:\Users\Taitai\AppData\Roaming\Typora\typora-user-images\image-20210511135453650.png" alt="image-20210511135453650" style="zoom: 50%;" />

